<!DOCTYPE html>
<html>

<head>
<!-- Basic -->
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!-- Mobile Metas -->
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<!-- Site Metas -->
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="author" content="" />
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link rel="shortcut icon" href="images/logo.png" type="">
<title>YourOnlineShop - Home</title>
<!-- bootstrap core css -->
<link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
<!-- font awesome style -->
<link href="css/font-awesome.min.css" rel="stylesheet" />
<!-- Custom styles for this template -->
<link href="css/style.css" rel="stylesheet" />
<!-- responsive style -->
<link href="css/responsive.css" rel="stylesheet" />

<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
	crossorigin="anonymous"></script>

</head>

<body onload=" loadProduct()">

	<div class="">
		<!-- header section strats -->
		<header class="header_section"
			style="background-color: rgb(162, 38, 36); box-shadow: 5px 5px 2px; height: 200px;">
			<div class="container heading_center" style="">
				<a class="navbar-brand" href="home"> <img
					width="150px
                     " src="images/logo.png" /></a>
			</div>
			<div class="form-group">

				<nav style="display: flex; justify-content: center;"
					class=" mt-xl-5 navbar navbar-expand-lg custom_nav-container ">

					<button class="navbar-toggler" type="button" data-toggle="collapse"
						data-target="#navbarSupportedContent"
						aria-controls="navbarSupportedContent" aria-expanded="false"
						aria-label="Toggle navigation"></button>

					<div class="collapse navbar-collapse" id="navbarSupportedContent">
						<ul class="navbar-nav">
							<div style="background-color: rgb(215, 58, 51);" class="mr-sm-2">
								<a href="addProduct" class="btn btn-lg">Aggiungi Prodotto <span
									style="color: rgb(43, 43, 43);"
									class="glyphicon glyphicon-plus"></span>
								</a>
							</div>
							<div id="carello" class="mr-sm-2">
							
								<div class=" dropdown dropdown-item" onclick="">
									<li class="fa fa-shopping-cart " type="button"
										style="font-size: 30px; margin-right: 10px" id="dropdownMenu2"
										data-bs-toggle="dropdown" aria-expanded="false"></li>
									<div class="dropdown-menu" aria-labelledby="dropdownMenu2">
										<li class="">
											<div class="container dropdown-item"
												style="width: max-content;">
												<div class="row" id="dropDownCart" style="width: 300px">

												</div></li> <a href="shipping" class="btn btn-primary"
											style="margin-top: 10px; margin-left: 10px;">Go to the
											cart</a>
									</div>
								</div>
							</div>
							<div
								style="display: -ms-flexbox; display: flex; -ms-flex-align: center; align-items: center;">
								<form class="input-group">

									<input style="width: 180px;" class="form-control mr-sm-2 "
										type="search" placeholder="Search" aria-label="Search">
									<button
										style="width: 70px; color: rgb(215, 58, 51); border-color: rgb(215, 58, 51);"
										class=" form-control btn btn-outline-info my-2 my-sm-0"
										type="submit">
										<span style="color: black">Search 
									</button>
								</form>
							</div>
					</div>
					</ul>
			</div>
			</nav>
	</div>
	</header>
	<!-- end header section -->
	</div>
	<!-- product section -->
	<section class="product_section layout_padding">
		<div class="container">
			<div class="heading_center">
				<p align="center" style="font-size: 40px;">Our products</p>
				<hr
					style="height: 2px; border-width: 2; color: #000000; background-color: #f7444e; box-shadow: 5px #000000;">
			</div>
			<div class="row" id="elencop">
				
			</div>

		</div>
	</section>
	<div class="btn btn-dark " id="ViewAllProduct"
		style="display: block; margin-left: auto; margin-right: auto; width: 40%; margin-top: -20px; margin-bottom: 30px"
		onclick="addProductAll()">View All products</div>
	<!-- end product section -->




	<!-- jQery -->
	<script src="js/jquery-3.4.1.min.js"></script>
	<!-- popper js -->
	<script src="js/popper.min.js"></script>
	<!-- bootstrap js -->
	<script src="js/bootstrap.js"></script>
	<!-- custom js -->
	<script src="js/custom.js"></script>
</body>
<script type="text/javascript">
	//------------------------------------loadProduct---------------------------------------------------
	var products
	function loadProduct(e) {
		var httpRequest = new XMLHttpRequest();
		httpRequest.onreadystatechange = reaction;
		httpRequest.open("GET", "http://localhost:8080/database/product/all", true);
		httpRequest.send();
	}
	function reaction(e) {
		if (e.target.readyState == XMLHttpRequest.DONE) {
			var i = 0;
			var json = e.target.responseText;
			var jsonparse = JSON.parse(json)
			console.log(jsonparse)
			addProduct("elencop", jsonparse)
		}
	}
	function addProduct(tableID, content) {
		var elencop = document.getElementById(tableID);
		console.log(content.length)
		products = content
		for (var i = 0; i < content.length; i++) {
			if (i == 2)
				break
			var prod = content[i];
			// 			if (d.length >= 31)
			// 				d = d.substring(0, 28) + "...";
			if (i == 1) {
				elencop.insertAdjacentHTML("beforeend",
						'<div class="col-sm-6 col-md-4 col-lg-4" id="lastProduct">'
								+ '<div class="box">'
								+ '<div class="option_container">'
								+ '<div class="options">'
								+ '<a style=" font-size:15px;" onclick="insertProductToCart(' + i
								+ ')" class="option1 btn" id="' + i
								+ '"> Add to cart </a><a style=" font-size:15px;" href="product/'+prod.productId+'"  class="option2 btn " >View The Product</a>'
								+ '</div>'
								+ '</div>' + '<div class="img-box">'
								+ '<img src="'+prod.imageUrl+'" alt="">'
								+ '</div>' + '<div class="detail-box">'
								+ '<h5>' + prod.productName + '</h5>' + '<h5>'
								+ prod.cost + '€</h5>' + '</div>' + '</div>'
								+ '</div>');
			} else {
				elencop.insertAdjacentHTML("beforeend",
						'<div class="col-sm-6 col-md-4 col-lg-4">'
						+ '<div class="box">'
						+ '<div class="option_container">'
						+ '<div class="options">'
						+ '<a style=" font-size:15px;" onclick="insertProductToCart(' + i
						+ ')" class="option1 btn" id="' + i
						+ '"> Add to cart </a><a style=" font-size:15px;" href="product/'+prod.productId+'"  class="option2 btn " >View The Product</a>'
						+ '</div>'
						+ '</div>' + '<div class="img-box">'
						+ '<img src="'+prod.imageUrl+'" alt="">'
						+ '</div>' + '<div class="detail-box">'
						+ '<h5>' + prod.productName + '</h5>' + '<h5>'
						+ prod.cost + '€</h5>' + '</div>' + '</div>'
						+ '</div>');
			}
		}

	}
	//----------------------ViewAllProduct---------------------------------------------------

	function addProductAll(tableID) {
		var elencop = document.getElementById("lastProduct");
		var bnt = document.getElementById("ViewAllProduct");
		var content = products
		for (var i = 0; i < content.length; i++) {
			if (i < 2) {
			} else {
				var prod = content[i];
				// 			if (d.length >= 31)
				// 				d = d.substring(0, 28) + "...";
				elencop.insertAdjacentHTML("afterend",
						'<div class="col-sm-6 col-md-4 col-lg-4" >'
						+ '<div class="box">'
						+ '<div class="option_container">'
						+ '<div class="options">'
						+ '<a style=" font-size:15px;" onclick="insertProductToCart(' + i
						+ ')" class="option1 btn" id="' + i
						+ '"> Add to cart </a><a style=" font-size:15px;" href="product/'+prod.productId+'"  class="option2 btn " >View The Product</a>'
						+ '</div>'
						+ '</div>' + '<div class="img-box">'
						+ '<img src="'+prod.imageUrl+'" alt="">'
						+ '</div>' + '<div class="detail-box">'
						+ '<h5>' + prod.productName + '</h5>' + '<h5>'
						+ prod.cost + '€</h5>' + '</div>' + '</div>'
						+ '</div>');
			}
		}
		bnt.style.visibility = "hidden"
	}
	//--------------------------------------------------------------------------------------------
	function insertProductToCart(idIndex) {
		var dropDownCart = document.getElementById("dropDownCart");
		dropDownCart.insertAdjacentHTML(
						"beforeend",
						'<div class="col-sm-6 col-md-4 col-lg-4 mt-2">'
								+ '<div class="box">'
								+ '<div class="img-box">'
								+ '	<img src="'+products[idIndex].imageUrl+'" width="50px"'
										+'		style="margin-left: 20px;">'
								+ '	</div>' + '</div>' + '</div>'
								+ '<div class=" col-lg-8">'
								+ '<div class="box">'
								+ '	<div class=" detail-box">' + '		<h5>'
								+ products[idIndex].productName + '</h5>'
								+ '		<h5>' + products[idIndex].cost + '€</h5>'
								+ '	</div>' + '	</div>' + '</div>')
	}
</script>

</html>
<!----[
   {
      "productId":1,
      "productName":"Test",
      "cost":2.99,
      "disponibiliy":99,
      "description":"Test description",
      "imageUrl":"pImage.png"
   }
]--->